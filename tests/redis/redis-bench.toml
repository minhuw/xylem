# Redis benchmark with separate latency and throughput agents
# This profile is used for testing multi-traffic-group configurations

[experiment]
name = "redis-bench"
duration = "30s"
seed = 42

# Latency agent - optimized for accurate latency measurements
[[traffic_groups]]
name = "latency-agent"
protocol = "redis"
target = "127.0.0.1:6379"
transport = "tcp"
threads = [0]
connections_per_thread = 10
max_pending_per_connection = 1

[traffic_groups.protocol_config.keys]
strategy = "sequential"
start = 0
value_size = 64

[traffic_groups.protocol_config.operations]
strategy = "fixed"
operation = "get"

[traffic_groups.traffic_policy]
type = "fixed-rate"
rate = 5000.0

[traffic_groups.sampling_policy]
type = "unlimited"

# Throughput agent - optimized for high throughput
[[traffic_groups]]
name = "throughput-agent"
protocol = "redis"
target = "127.0.0.1:6379"
transport = "tcp"
threads = [1, 2, 3]
connections_per_thread = 25
max_pending_per_connection = 32

[traffic_groups.protocol_config.keys]
strategy = "sequential"
start = 0
value_size = 64

[traffic_groups.protocol_config.operations]
strategy = "fixed"
operation = "get"

[traffic_groups.traffic_policy]
type = "fixed-rate"
rate = 5000.0

[traffic_groups.sampling_policy]
type = "limited"
rate = 0.01
max_samples = 10000

[output]
format = "json"
file = "/tmp/redis-bench.json"
real_time = false
