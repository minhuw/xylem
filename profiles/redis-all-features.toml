# Example: All new features combined
# Demonstrates: Gaussian keys + Weighted commands + Variable sizes

[experiment]
name = "redis-all-features"
description = "Comprehensive test of all new features"
duration = "10s"
seed = 42  # Reproducible

[target]
address = "127.0.0.1:6379"
protocol = "redis"
transport = "tcp"

[workload]
# Gaussian key distribution: hot-spot at 60% of keyspace
[workload.keys]
strategy = "gaussian"
mean_pct = 0.6       # Center at 60% (key 6000)
std_dev_pct = 0.15   # 15% spread
max = 10000
value_size = 512     # Default (used if value_size config not specified)

# Weighted command selection: 60% GET, 40% SET
[workload.operations]
strategy = "weighted"
[[workload.operations.commands]]
name = "get"
weight = 0.6

[[workload.operations.commands]]
name = "set"
weight = 0.4

# Variable value sizes
[workload.value_size]
strategy = "per_command"
default = { strategy = "fixed", size = 256 }

[workload.value_size.commands.get]
distribution = "fixed"
size = 64

[workload.value_size.commands.set]
distribution = "uniform"
min = 128
max = 1024

[workload.pattern]
type = "constant"
rate = 10000.0

[[traffic_groups]]
name = "mixed-workload"
threads = [0]
connections_per_thread = 20
max_pending_per_connection = 10

[traffic_groups.policy]
type = "closed-loop"

[traffic_groups.sampling_policy]
type = "limited"
rate = 1.0
max_samples = 100000

[output]
format = "json"
file = "/tmp/redis-all-features.json"
real_time = false
