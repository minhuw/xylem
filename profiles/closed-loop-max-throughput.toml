# Closed-loop maximum throughput test
# Measures maximum achievable throughput without rate limiting
# Useful for baseline performance measurement and capacity planning

[experiment]
name = "closed-loop-max-throughput"
description = "Maximum throughput test using closed-loop execution (no rate limiting)"
seed = 1234567890
duration = "30s"

# Single traffic group for maximum throughput
[[traffic_groups]]
name = "max-throughput"
protocol = "memcached-binary"
target = "127.0.0.1:11211"
transport = "tcp"
threads = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]  # 16 threads
connections_per_thread = 1
max_pending_per_connection = 1

[traffic_groups.protocol_config.keys]
strategy = "random"
max = 1000000       # 1M key space to test cache behavior
value_size = 64     # Small values for max throughput

[traffic_groups.sampling_policy]
type = "unlimited"  # 100% sampling

[traffic_groups.traffic_policy]
type = "closed-loop"  # Send next request immediately after response

[output]
format = "human"
file = "results/closed-loop-max.json"
