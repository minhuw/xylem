# HTTP load test with traffic spike
# Simulates normal load with sudden 10x spike to test system resilience

[experiment]
name = "http-spike-test"
description = "HTTP load test with 10x traffic spike to measure tail latencies under stress"
seed = 99999
duration = "120s"

[target]
transport = "tcp"


# Single traffic group with Poisson arrival
[[traffic_groups]]
name = "poisson-spike"
protocol = "http"
target = "127.0.0.1:8080"
threads = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]  # 16 threads
connections_per_thread = 1
max_pending_per_connection = 1

[traffic_groups.protocol_config]
method = "GET"
path = "/"
body_size = 256     # Request body size for POST/PUT requests

[traffic_groups.sampling_policy]
type = "unlimited"  # 100% sampling

[traffic_groups.traffic_policy]
type = "poisson"
rate = 10.0  # 10 req/s per connection (Poisson distribution)

[output]
format = "human"
file = "results/http-spike.json"
