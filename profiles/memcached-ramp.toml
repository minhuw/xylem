# Memcached with ramping load pattern
# Gradually increases load from 1K to 100K req/s to find breaking point

[experiment]
name = "memcached-ramp-load"
description = "Ramping load test to determine maximum sustainable throughput"
seed = 12345
duration = "60s"

[target]
address = "127.0.0.1:11211"
protocol = "memcached-binary"
transport = "tcp"

[workload]
[workload.keys]
strategy = "random"
max = 100000        # 100K key space for cache miss testing
value_size = 1024   # 1KB values

[workload.pattern]
type = "ramp"
start_rate = 1000.0    # Start at 1K req/s
end_rate = 100000.0    # Ramp up to 100K req/s
duration = "60s"

# Single traffic group with fixed-rate
[[traffic_groups]]
name = "ramp-test"
threads = [0, 1, 2, 3, 4, 5, 6, 7]  # 8 threads
connections_per_thread = 25  # 200 total connections
max_pending_per_connection = 1
sampling_rate = 1.0  # 100% sampling

[traffic_groups.policy]
type = "fixed-rate"
rate = 500.0  # Per-connection rate (200 * 500 = 100K max)

[output]
format = "human"
file = "results/memcached-ramp.json"
